(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{26:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(21),c=n.n(a),s=(n(26),n(11)),u=n(5),i=n(6),o=n.n(i),b=(n(45),n(1)),j=(n(46),n(47),n(0)),d=function(e){var t=e.name,n=e.handleChange,r=e.newName;return Object(j.jsxs)("div",{style:{textTransform:"uppercase"},children:[Object(j.jsxs)("span",{children:[t,":"]})," ",Object(j.jsx)("input",{name:t,onChange:n,value:r})]})},f=n(4),l=n.n(f),h=n(8),p="http://localhost:3001/api/persons",m=function(){var e=Object(h.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.delete("".concat(p,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(h.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post(p,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(h.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.patch("".concat(p,"/").concat(n),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(e){var t=e.persons,n=e.setPersons,a=e.setMessage,c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],o=s[1];return Object(j.jsxs)("div",{className:"phonebook",children:[Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(d,{name:"search",handleChange:function(e){o(e.target.value)},newName:i}),t.filter((function(e){return e.name.toLowerCase().includes(i.toLowerCase())})).map((function(e){return Object(j.jsxs)("p",{children:[e.name," : ",e.number," ",Object(j.jsx)("span",{onClick:function(){var t;t=e.id,window.confirm("Delete number?")&&(m(t).then((function(){a({text:"Phone has been deleted!",isBad:!1}),setInterval((function(){return a((function(e){return Object(b.a)(Object(b.a)({},e),{},{text:""})}))}),5e3)})).catch((function(){a({text:"An error happened! Try again later.",isBad:!0}),setInterval((function(){return a((function(e){return Object(b.a)(Object(b.a)({},e),{},{text:""})}))}),5e3)})),n((function(e){return e.filter((function(e){return e.id!==t}))})))},id:"delete",children:"Delete"})]},e.id)}))]})},g=n(10),w=(n(50),function(e){return!e.trim()||!e}),N=function(e,t,n){return-1!==n.map((function(e){return e[t]})).indexOf(e[t])&&n.filter((function(n){return n[t]===e[t]}))[0].id},k=function(e){var t=e.persons,n=e.setPersons,a=(e.nextId,e.setNextId),c=e.setMessage,i=Object(r.useState)({name:"",number:""}),o=Object(u.a)(i,2),f=o[0],l=o[1],h=function(e){l(Object(b.a)(Object(b.a)({},f),{},Object(g.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)("div",{className:"form",children:[Object(j.jsx)("h1",{children:"Phonebook"}),Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{className:"inputField",children:[Object(j.jsx)(d,{handleChange:h,newName:f.name,name:"name"}),Object(j.jsx)(d,{handleChange:h,newName:f.number,name:"number"})]}),Object(j.jsx)("div",{className:"btn",children:Object(j.jsx)("button",{onClick:function(e){if(e.preventDefault(),w(f.name)||w(f.number))alert("Field is required");else if(N(f,"name",t)){if(window.confirm("Want to overwrite ".concat(f.name,"?"))){var r=N(f,"name",t);x({number:f.number},r).then((function(e){c({text:"".concat(e.name," has been updated!"),isBad:!1}),n((function(t){return t.map((function(t){return t.id===r?e:t}))})),setInterval((function(){return c((function(e){return Object(b.a)(Object(b.a)({},e),{},{text:""})}))}),5e3)})).catch((function(){c({text:"An error happened! Try again later.",isBad:!0}),setInterval((function(){return c((function(e){return Object(b.a)(Object(b.a)({},e),{},{text:""})}))}),5e3)}))}}else{var u=Object(b.a)({},f);O(u).then((function(e){n((function(t){return[].concat(Object(s.a)(t),[e])})),l((function(e){return Object(b.a)(Object(b.a)({},e),{},{name:"",number:""})})),a((function(e){return e+1})),c({text:"".concat(e.name," has been created!"),isBad:!1}),setInterval((function(){return c((function(e){return Object(b.a)(Object(b.a)({},e),{},{text:""})}))}),5e3)})).catch((function(){c({text:"An error happened! Try again later.",isBad:!0}),setInterval((function(){return c((function(e){return Object(b.a)(Object(b.a)({},e),{},{text:""})}))}),5e3)}))}},type:"submit",children:"add"})})]})]})},y=(n(51),function(e){var t=e.message;return Object(j.jsx)("div",{className:"message ".concat(t.isBad?"bad":"good"),children:Object(j.jsx)("h2",{children:t.text})})}),I=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(0),i=Object(u.a)(c,2),b=i[0],d=i[1],f=Object(r.useState)({text:"",isBad:!1}),l=Object(u.a)(f,2),h=l[0],p=l[1];return Object(r.useEffect)((function(){o.a.get("http://localhost:3001/api/persons").then((function(e){a(e.data),d(1+Math.max.apply(Math,Object(s.a)(e.data.map((function(e){return e.id})))))})).catch(console.error)}),[]),Object(j.jsxs)("div",{className:"App",children:[h.text&&Object(j.jsx)(y,{message:h}),Object(j.jsxs)("div",{className:"BodyApp",children:[Object(j.jsx)(k,{persons:n,setPersons:a,nextId:b,setNextId:d,setMessage:p}),Object(j.jsx)(v,{persons:n,setPersons:a,setMessage:p})]})]})};c.a.render(Object(j.jsx)(I,{}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.54bf41ff.chunk.js.map